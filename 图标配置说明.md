# Magpie 图标配置说明

## 更新时间
2025-10-24 15:05

## 问题描述

用户反馈：构建的应用没有使用自定义图标，希望使用 `img/` 目录下的 Magpie LOGO。

## 解决方案

### 1. 图标文件位置

项目中的图标文件：
```
img/
├── magpie.ico      # Windows ICO 格式（尺寸不足256x256）
└── magpie.png      # PNG 格式图标

public/
└── magpie.png      # PNG 格式图标（供 HTML 使用）
```

### 2. 配置更新

#### package.json 配置
```json
"build": {
  "files": [
    "dist/**/*",
    "package.json",
    "img/**/*"          // 新增：包含图标文件
  ],
  "win": {
    "target": "nsis",
    "icon": "public/magpie.png"   // 使用 PNG 图标
  },
  "mac": {
    "target": "dmg",
    "icon": "public/magpie.png"
  },
  "linux": {
    "target": "AppImage",
    "icon": "public/magpie.png"
  }
}
```

#### index.html 配置
```html
<link rel="icon" type="image/png" href="/magpie.png" />
```

### 3. 为什么使用 PNG 而不是 ICO

**原因：**
- `img/magpie.ico` 的尺寸小于 256x256
- Electron Builder 要求图标至少为 256x256
- PNG 格式更灵活，自动转换为各平台需要的格式

**Electron Builder 的图标处理：**
- Windows: PNG → ICO（自动生成多种尺寸）
- macOS: PNG → ICNS
- Linux: PNG → PNG

## 图标使用位置

### 1. Windows 应用
- ✅ **应用程序图标** - Magpie.exe 的图标
- ✅ **安装程序图标** - Magpie Setup.exe 的图标
- ✅ **任务栏图标** - 运行时显示的图标
- ✅ **开始菜单图标** - 快捷方式图标
- ✅ **桌面图标** - 桌面快捷方式图标

### 2. 应用内部
- ✅ **浏览器标签页图标** - favicon
- ✅ **窗口图标** - 应用窗口左上角

## 构建结果

### 构建成功
```
✓ 已包含自定义图标
✓ 所有位置都会显示 Magpie LOGO
✓ 应用程序和安装程序都使用正确的图标
```

### 构建产物
```
release/
├── Magpie Setup 1.0.0.exe          ← 带自定义图标
└── win-unpacked/
    └── Magpie.exe                   ← 带自定义图标
```

## 图标尺寸要求

### 推荐图标尺寸

**Windows (.ico 或 .png):**
- 最小: 256x256
- 推荐: 512x512 或更大
- 包含多种尺寸: 16, 32, 48, 64, 128, 256

**macOS (.icns 或 .png):**
- 推荐: 512x512 或 1024x1024

**Linux (.png):**
- 推荐: 512x512

### 当前图标
- `public/magpie.png` - 已使用（Vite 会自动复制）
- 构建时自动转换为各平台需要的格式

## 如何创建高质量 ICO 文件

如果以后想使用 .ico 格式，可以：

### 方法 1：在线工具
1. 访问 https://www.icoconverter.com/
2. 上传 PNG 图片（至少 512x512）
3. 选择包含的尺寸：16, 32, 48, 64, 128, 256
4. 下载生成的 .ico 文件

### 方法 2：使用 ImageMagick
```bash
magick convert magpie.png -define icon:auto-resize=256,128,64,48,32,16 magpie.ico
```

### 方法 3：使用 Photoshop/GIMP
1. 创建 256x256 或更大的图片
2. 导出为 .ico 格式
3. 选择包含多种尺寸

## 验证图标

### 检查安装程序图标
1. 右键点击 `Magpie Setup 1.0.0.exe`
2. 查看属性
3. 应该显示 Magpie LOGO

### 检查应用程序图标
1. 安装或运行应用
2. 查看桌面快捷方式
3. 查看任务栏图标
4. 查看窗口左上角
5. 应该都显示 Magpie LOGO

### 检查浏览器图标
1. 运行应用
2. 查看窗口标题栏
3. 如果打开开发者工具，查看标签页
4. 应该显示 Magpie LOGO

## 文件修改清单

- ✅ `package.json` - 添加图标配置
- ✅ `index.html` - 更新 favicon 路径
- ✅ 图标文件已包含在构建中

## 后续改进建议

### 1. 创建完整的图标集

建议创建以下尺寸的图标：

**PNG 格式：**
- icon-16.png (16x16)
- icon-32.png (32x32)
- icon-48.png (48x48)
- icon-64.png (64x64)
- icon-128.png (128x128)
- icon-256.png (256x256)
- icon-512.png (512x512)
- icon-1024.png (1024x1024)

**ICO 格式：**
- magpie.ico (包含多种尺寸)

### 2. 优化图标质量

- 使用矢量图（SVG）作为源文件
- 导出为高分辨率 PNG
- 确保在小尺寸下清晰可见
- 测试不同背景下的显示效果

### 3. 添加更多平台图标

**Windows:**
- 安装程序横幅图片
- 卸载程序图标
- 控制面板图标

**macOS:**
- DMG 背景图片
- 启动画面

**Linux:**
- 桌面文件图标
- 应用菜单图标

## 当前状态

✅ **已完成：**
- Windows 应用使用 Magpie LOGO
- 浏览器标签页使用 Magpie 图标
- 所有平台配置统一

✅ **图标位置：**
- 应用图标：`public/magpie.png`
- 构建配置：已更新
- HTML 配置：已更新

## 总结

现在 Magpie 应用在所有位置都会显示自定义的 LOGO：
- 🖥️ Windows 应用程序图标
- 📦 安装程序图标
- 🪟 窗口图标
- 🌐 浏览器标签页图标
- 📋 任务栏和开始菜单图标

重新构建的应用已包含完整的图标支持！🎨✨

