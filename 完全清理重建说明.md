# Magpie å®Œå…¨æ¸…ç†é‡å»ºè¯´æ˜

## æ›´æ–°æ—¶é—´
2025-10-24 15:25

## æ¸…ç†å’Œé‡å»ºè¿‡ç¨‹

### âœ… å·²å®Œæˆçš„æ¸…ç†æ­¥éª¤

1. **åˆ é™¤æ‰€æœ‰æ„å»ºç›®å½•**
   ```bash
   Remove-Item -Recurse -Force dist -ErrorAction SilentlyContinue
   Remove-Item -Recurse -Force release -ErrorAction SilentlyContinue
   Remove-Item -Recurse -Force build -ErrorAction SilentlyContinue
   Remove-Item -Recurse -Force node_modules\.cache -ErrorAction SilentlyContinue
   ```

2. **é‡æ–°ç”Ÿæˆå›¾æ ‡æ–‡ä»¶**
   ```bash
   npx electron-icon-builder --input=img/magpie.png --output=build --flatten
   ```

3. **å®Œå…¨é‡æ–°æ„å»º**
   ```bash
   npm run build
   npm run package
   ```

### ğŸ“ æ¸…ç†ç»“æœ

**åˆ é™¤çš„ç›®å½•ï¼š**
- âœ… `dist/` - æ¸²æŸ“å™¨æ„å»ºæ–‡ä»¶
- âœ… `release/` - æ‰“åŒ…è¾“å‡ºæ–‡ä»¶
- âœ… `build/` - å›¾æ ‡æ„å»ºæ–‡ä»¶
- âœ… `node_modules/.cache/` - ç¼“å­˜æ–‡ä»¶

**é‡æ–°ç”Ÿæˆçš„æ–‡ä»¶ï¼š**
```
build/icons/
â”œâ”€â”€ 16x16.png
â”œâ”€â”€ 24x24.png
â”œâ”€â”€ 32x32.png
â”œâ”€â”€ 48x48.png
â”œâ”€â”€ 64x64.png
â”œâ”€â”€ 128x128.png
â”œâ”€â”€ 256x256.png
â”œâ”€â”€ 512x512.png
â”œâ”€â”€ 1024x1024.png
â”œâ”€â”€ icon.ico         â† Windows å›¾æ ‡
â””â”€â”€ icon.icns        â† macOS å›¾æ ‡
```

### ğŸ”§ æ„å»ºé…ç½®

**å½“å‰é…ç½®ï¼š**
```json
{
  "build": {
    "files": [
      "dist/**/*",
      "package.json",
      "public/**/*",
      "img/**/*",
      "build/**/*"
    ],
    "win": {
      "target": "nsis",
      "icon": "H:\\cussorproject\\magpie\\build\\icons\\icon.ico"
    }
  }
}
```

**å›¾æ ‡æ–‡ä»¶ï¼š**
- Windows: `build/icons/icon.ico` (361KB)
- macOS: `build/icons/icon.icns`
- Linux: `build/icons/256x256.png`

### ğŸ“¦ æ„å»ºç»“æœ

**æˆåŠŸæ„å»ºï¼š**
```
release/
â”œâ”€â”€ Magpie Setup 1.0.0.exe          â† å¸¦è‡ªå®šä¹‰å›¾æ ‡
â”œâ”€â”€ Magpie Setup 1.0.0.exe.blockmap
â””â”€â”€ win-unpacked/
    â””â”€â”€ Magpie.exe                   â† å¸¦è‡ªå®šä¹‰å›¾æ ‡ (177MB)
```

**æ„å»ºæ—¥å¿—ï¼š**
```
â€¢ electron-builder  version=24.13.3 os=10.0.19045
â€¢ loaded configuration  file=package.json ("build" field)
â€¢ packaging       platform=win32 arch=x64 electron=28.3.3 appOutDir=release\win-unpacked
â€¢ building        target=nsis file=release\Magpie Setup 1.0.0.exe archs=x64 oneClick=true perMachine=false
â€¢ building block map  blockMapFile=release\Magpie Setup 1.0.0.exe.blockmap
```

## å›¾æ ‡çŠ¶æ€

### âœ… åº”ç”¨ç¨‹åºå›¾æ ‡
- **æ–‡ä»¶**: `release/win-unpacked/Magpie.exe`
- **å›¾æ ‡**: ä½¿ç”¨ `build/icons/icon.ico`
- **çŠ¶æ€**: åº”è¯¥æ˜¾ç¤º Magpie LOGO

### âœ… å®‰è£…ç¨‹åºå›¾æ ‡
- **æ–‡ä»¶**: `release/Magpie Setup 1.0.0.exe`
- **å›¾æ ‡**: ä½¿ç”¨ `build/icons/icon.ico`
- **çŠ¶æ€**: åº”è¯¥æ˜¾ç¤º Magpie LOGO

### âœ… åº”ç”¨å†…å›¾æ ‡
- **favicon**: `./magpie.png` (ç›¸å¯¹è·¯å¾„)
- **çŠ¶æ€**: åº”è¯¥æ­£å¸¸æ˜¾ç¤ºï¼Œä¸å†"å›¾è£‚äº†"

## éªŒè¯æ­¥éª¤

### 1. æ£€æŸ¥å›¾æ ‡æ–‡ä»¶
```bash
# æ£€æŸ¥ç”Ÿæˆçš„å›¾æ ‡æ–‡ä»¶
dir build\icons\icon.ico

# åŒå‡»æŸ¥çœ‹å›¾æ ‡å†…å®¹
# åº”è¯¥æ˜¾ç¤º Magpie LOGO
```

### 2. æ£€æŸ¥åº”ç”¨ç¨‹åº
```bash
# æŸ¥çœ‹åº”ç”¨ç¨‹åºå›¾æ ‡
dir release\win-unpacked\Magpie.exe

# æŸ¥çœ‹å®‰è£…ç¨‹åºå›¾æ ‡
dir release\Magpie Setup 1.0.0.exe
```

### 3. è¿è¡Œåº”ç”¨æµ‹è¯•
```bash
# è¿›å…¥åº”ç”¨ç›®å½•
cd release\win-unpacked

# è¿è¡Œåº”ç”¨
.\Magpie.exe
```

### 4. æ£€æŸ¥å›¾æ ‡æ˜¾ç¤º
- æŸ¥çœ‹çª—å£æ ‡é¢˜æ å›¾æ ‡
- æŸ¥çœ‹ä»»åŠ¡æ å›¾æ ‡
- æŸ¥çœ‹åº”ç”¨å†…æ‰€æœ‰å›¾æ ‡å¼•ç”¨
- åº”è¯¥éƒ½æ˜¾ç¤º Magpie LOGO

## æŠ€æœ¯ç»†èŠ‚

### å›¾æ ‡ç”Ÿæˆè¿‡ç¨‹

**electron-icon-builder å·¥å…·ï¼š**
```bash
npx electron-icon-builder --input=img/magpie.png --output=build --flatten
```

**ç”Ÿæˆçš„æ–‡ä»¶ï¼š**
- å¤šç§å°ºå¯¸çš„ PNG æ–‡ä»¶ (16x16 åˆ° 1024x1024)
- Windows ICO æ–‡ä»¶ (åŒ…å«å¤šå°ºå¯¸)
- macOS ICNS æ–‡ä»¶

**å›¾æ ‡è´¨é‡ï¼š**
- æºæ–‡ä»¶: `img/magpie.png` (67KB)
- ç”Ÿæˆæ–‡ä»¶: `build/icons/icon.ico` (361KB)
- åŒ…å«å°ºå¯¸: 16, 24, 32, 48, 64, 128, 256, 512, 1024

### æ„å»ºè¿‡ç¨‹

**Vite æ„å»ºï¼š**
```
src/renderer/ â†’ dist/renderer/
â”œâ”€â”€ index.html â†’ index.html (åŒ…å«ä¿®å¤åçš„ favicon è·¯å¾„)
â”œâ”€â”€ main.tsx â†’ assets/index-xxx.js
â”œâ”€â”€ index.css â†’ assets/index-xxx.css
â””â”€â”€ public/magpie.png â†’ magpie.png
```

**Electron æ‰“åŒ…ï¼š**
```
dist/renderer/ â†’ resources/app.asar
â”œâ”€â”€ index.html
â”œâ”€â”€ magpie.png
â””â”€â”€ assets/
```

**å›¾æ ‡åŒ…å«ï¼š**
```
build/icons/ â†’ åº”ç”¨å›¾æ ‡
â”œâ”€â”€ icon.ico â†’ Windows åº”ç”¨å›¾æ ‡
â”œâ”€â”€ icon.icns â†’ macOS åº”ç”¨å›¾æ ‡
â””â”€â”€ å„ç§å°ºå¯¸çš„ PNG æ–‡ä»¶
```

## å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ
- å®Œå…¨æ¸…ç†æ‰€æœ‰ç¼“å­˜å’Œæ„å»ºæ–‡ä»¶
- é‡æ–°ç”Ÿæˆç¬¦åˆè¦æ±‚çš„å›¾æ ‡æ–‡ä»¶
- å®Œå…¨é‡æ–°æ„å»ºåº”ç”¨
- é‡æ–°æ‰“åŒ… Windows åº”ç”¨
- æ„å»ºæˆåŠŸï¼Œæ²¡æœ‰é”™è¯¯

### ğŸ“ æ–‡ä»¶çŠ¶æ€
```
build/icons/icon.ico     - 361KB (å­˜åœ¨)
release/win-unpacked/Magpie.exe - 177MB (å­˜åœ¨)
release/Magpie Setup 1.0.0.exe - å­˜åœ¨
```

### âš™ï¸ é…ç½®çŠ¶æ€
- å›¾æ ‡è·¯å¾„: ç»å¯¹è·¯å¾„æŒ‡å‘ç”Ÿæˆçš„ ICO æ–‡ä»¶
- favicon è·¯å¾„: ç›¸å¯¹è·¯å¾„ `./magpie.png`
- æ„å»ºé…ç½®: å·²æ›´æ–°
- æ–‡ä»¶åŒ…å«: å·²é…ç½®

## é¢„æœŸç»“æœ

ç°åœ¨ Magpie åº”ç”¨åº”è¯¥åœ¨æ‰€æœ‰ä½ç½®éƒ½æ­£ç¡®æ˜¾ç¤ºè‡ªå®šä¹‰å›¾æ ‡ï¼š

### ğŸ–¥ï¸ åº”ç”¨ç¨‹åºå›¾æ ‡
- Magpie.exe æ˜¾ç¤º Magpie LOGO
- ä¸å†æ˜¾ç¤º Electron é»˜è®¤å›¾æ ‡

### ğŸ“¦ å®‰è£…ç¨‹åºå›¾æ ‡
- Magpie Setup.exe æ˜¾ç¤º Magpie LOGO
- å®‰è£…ç¨‹åºä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡

### ğŸªŸ çª—å£å›¾æ ‡
- åº”ç”¨è¿è¡Œæ—¶çª—å£å›¾æ ‡
- ä»»åŠ¡æ å›¾æ ‡
- å¼€å§‹èœå•å›¾æ ‡

### ğŸŒ åº”ç”¨å†…å›¾æ ‡
- çª—å£æ ‡é¢˜æ å›¾æ ‡
- æµè§ˆå™¨æ ‡ç­¾é¡µå›¾æ ‡
- æ‰€æœ‰åº”ç”¨å†…å›¾æ ‡å¼•ç”¨
- ä¸å†"å›¾è£‚äº†"

## æ€»ç»“

é€šè¿‡å®Œå…¨æ¸…ç†ç¼“å­˜å’Œé‡æ–°æ„å»ºï¼Œæˆ‘ä»¬ç¡®ä¿äº†ï¼š

1. **æ¸…ç†å½»åº•** - åˆ é™¤äº†æ‰€æœ‰å¯èƒ½å½±å“æ„å»ºçš„ç¼“å­˜
2. **å›¾æ ‡é‡æ–°ç”Ÿæˆ** - ä½¿ç”¨æœ€æ–°é…ç½®ç”Ÿæˆå›¾æ ‡
3. **å®Œå…¨é‡å»º** - ä»é›¶å¼€å§‹æ„å»ºåº”ç”¨
4. **é…ç½®æ­£ç¡®** - æ‰€æœ‰è·¯å¾„å’Œé…ç½®éƒ½å·²æ›´æ–°

ç°åœ¨ Magpie åº”ç”¨åº”è¯¥å®Œç¾æ˜¾ç¤ºè‡ªå®šä¹‰å›¾æ ‡ï¼ŒåŒ…æ‹¬åº”ç”¨ç¨‹åºå›¾æ ‡ã€å®‰è£…ç¨‹åºå›¾æ ‡ã€çª—å£å›¾æ ‡å’Œåº”ç”¨å†…å›¾æ ‡ï¼ğŸ¨âœ¨

## ä¸‹ä¸€æ­¥

è¯·è¿è¡Œåº”ç”¨éªŒè¯å›¾æ ‡æ˜¾ç¤ºï¼š
```bash
cd release\win-unpacked
.\Magpie.exe
```

å¦‚æœå›¾æ ‡ä»ç„¶æ˜¾ç¤ºä¸æ­£ç¡®ï¼Œè¯·å‘Šè¯‰æˆ‘å…·ä½“å“ªä¸ªä½ç½®è¿˜æœ‰é—®é¢˜ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥è°ƒè¯•ï¼
