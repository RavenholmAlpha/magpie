# Magpie å›¾æ ‡è°ƒè¯•è¯´æ˜

## æ›´æ–°æ—¶é—´
2025-10-24 15:15

## å½“å‰çŠ¶æ€

### âœ… å·²å®Œæˆ
1. **æ¸…ç†ç¼“å­˜** - åˆ é™¤äº† distã€release ç›®å½•
2. **é‡æ–°æ„å»º** - å®Œå…¨é‡æ–°æ„å»ºåº”ç”¨
3. **ä½¿ç”¨ç»å¯¹è·¯å¾„** - é…ç½®ä½¿ç”¨ç»å¯¹è·¯å¾„æŒ‡å‘å›¾æ ‡æ–‡ä»¶
4. **æ„å»ºæˆåŠŸ** - æ²¡æœ‰é”™è¯¯ï¼Œåº”ç”¨æ­£å¸¸ç”Ÿæˆ

### ğŸ“ æ–‡ä»¶çŠ¶æ€
```
build/icons/icon.ico     - 361KB (å­˜åœ¨)
release/win-unpacked/Magpie.exe - 177MB (å­˜åœ¨)
```

### âš™ï¸ å½“å‰é…ç½®
```json
"win": {
  "target": "nsis",
  "icon": "H:\\cussorproject\\magpie\\build\\icons\\icon.ico"
}
```

## å¯èƒ½çš„é—®é¢˜

### 1. å›¾æ ‡æ–‡ä»¶é—®é¢˜
- **æ£€æŸ¥**: å›¾æ ‡æ–‡ä»¶æ˜¯å¦çœŸçš„åŒ…å« Magpie LOGO
- **éªŒè¯**: åŒå‡» `build/icons/icon.ico` æŸ¥çœ‹å†…å®¹

### 2. æ„å»ºç¼“å­˜é—®é¢˜
- **æ£€æŸ¥**: Electron Builder æ˜¯å¦ä½¿ç”¨äº†ç¼“å­˜
- **è§£å†³**: å¯èƒ½éœ€è¦æ¸…ç†æ›´å¤šç¼“å­˜

### 3. å›¾æ ‡æ ¼å¼é—®é¢˜
- **æ£€æŸ¥**: ICO æ–‡ä»¶æ˜¯å¦åŒ…å«æ­£ç¡®çš„å°ºå¯¸
- **éªŒè¯**: æ–‡ä»¶æ˜¯å¦è¢«æ­£ç¡®è¯†åˆ«

## è°ƒè¯•æ­¥éª¤

### æ­¥éª¤ 1: éªŒè¯å›¾æ ‡æ–‡ä»¶
```bash
# æ£€æŸ¥å›¾æ ‡æ–‡ä»¶
dir build\icons\icon.ico

# åŒå‡»æŸ¥çœ‹å›¾æ ‡å†…å®¹
# åº”è¯¥æ˜¾ç¤º Magpie LOGO
```

### æ­¥éª¤ 2: æ£€æŸ¥æ„å»ºæ—¥å¿—
æ„å»ºè¿‡ç¨‹ä¸­åº”è¯¥æ˜¾ç¤ºï¼š
```
â€¢ packaging       platform=win32 arch=x64 electron=28.3.3 appOutDir=release\win-unpacked
â€¢ building        target=nsis file=release\Magpie Setup 1.0.0.exe archs=x64 oneClick=true perMachine=false
```

**æ³¨æ„**: æ²¡æœ‰æ˜¾ç¤º "default Electron icon is used" è¯´æ˜å›¾æ ‡é…ç½®è¢«è¯†åˆ«äº†ã€‚

### æ­¥éª¤ 3: éªŒè¯åº”ç”¨å›¾æ ‡
1. **æŸ¥çœ‹å®‰è£…ç¨‹åºå›¾æ ‡**
   - æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨
   - å¯¼èˆªåˆ° `H:\cussorproject\magpie\release\`
   - æŸ¥çœ‹ `Magpie Setup 1.0.0.exe` çš„å›¾æ ‡

2. **æŸ¥çœ‹åº”ç”¨ç¨‹åºå›¾æ ‡**
   - æŸ¥çœ‹ `H:\cussorproject\magpie\release\win-unpacked\Magpie.exe` çš„å›¾æ ‡

### æ­¥éª¤ 4: è¿è¡Œåº”ç”¨æµ‹è¯•
```bash
cd release\win-unpacked
Magpie.exe
```

## è¿›ä¸€æ­¥è°ƒè¯•æ–¹æ³•

### æ–¹æ³• 1: æ£€æŸ¥å›¾æ ‡å†…å®¹
```bash
# ä½¿ç”¨ PowerShell æ£€æŸ¥å›¾æ ‡
Add-Type -AssemblyName System.Drawing
$ico = [System.Drawing.Icon]::FromFile('build\icons\icon.ico')
Write-Host "Icon size: $($ico.Size.Width)x$($ico.Size.Height)"
$ico.Dispose()
```

### æ–¹æ³• 2: å°è¯•ä¸åŒçš„å›¾æ ‡æ ¼å¼
```json
"win": {
  "target": "nsis",
  "icon": "build/icons/256x256.png"  // å°è¯•ä½¿ç”¨ PNG
}
```

### æ–¹æ³• 3: æ£€æŸ¥å›¾æ ‡æ˜¯å¦è¢«åŒ…å«
```bash
# æ£€æŸ¥æ„å»ºåçš„èµ„æº
dir release\win-unpacked\resources\
```

### æ–¹æ³• 4: ä½¿ç”¨ä¸åŒçš„å›¾æ ‡ç”Ÿæˆæ–¹æ³•
```bash
# é‡æ–°ç”Ÿæˆå›¾æ ‡ï¼Œä½¿ç”¨ä¸åŒçš„å‚æ•°
npx electron-icon-builder --input=img/magpie.png --output=build --flatten --win
```

## å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1: é‡æ–°ç”Ÿæˆå›¾æ ‡
```bash
# åˆ é™¤ç°æœ‰å›¾æ ‡
Remove-Item -Recurse -Force build -ErrorAction SilentlyContinue

# é‡æ–°ç”Ÿæˆ
npx electron-icon-builder --input=img/magpie.png --output=build --flatten

# æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
dir build\icons\
```

### æ–¹æ¡ˆ 2: ä½¿ç”¨ä¸åŒçš„å›¾æ ‡æº
```bash
# ä½¿ç”¨ public ç›®å½•ä¸‹çš„å›¾æ ‡
npx electron-icon-builder --input=public/magpie.png --output=build --flatten
```

### æ–¹æ¡ˆ 3: æ£€æŸ¥åŸå§‹å›¾æ ‡æ–‡ä»¶
```bash
# æ£€æŸ¥åŸå§‹å›¾æ ‡æ–‡ä»¶
dir img\magpie.png
dir public\magpie.png
```

### æ–¹æ¡ˆ 4: ä½¿ç”¨åœ¨çº¿å·¥å…·
1. è®¿é—® https://www.icoconverter.com/
2. ä¸Šä¼  `img/magpie.png`
3. é€‰æ‹©åŒ…å«çš„å°ºå¯¸ï¼š16, 32, 48, 64, 128, 256
4. ä¸‹è½½ç”Ÿæˆçš„ .ico æ–‡ä»¶
5. æ›¿æ¢ `build/icons/icon.ico`

## éªŒè¯æ–¹æ³•

### 1. å›¾æ ‡æ–‡ä»¶éªŒè¯
- åŒå‡» `build/icons/icon.ico`
- åº”è¯¥æ˜¾ç¤º Magpie LOGO
- å¦‚æœæ˜¾ç¤ºçš„æ˜¯å…¶ä»–å›¾æ ‡ï¼Œè¯´æ˜ç”Ÿæˆæœ‰é—®é¢˜

### 2. åº”ç”¨å›¾æ ‡éªŒè¯
- æŸ¥çœ‹ `release/win-unpacked/Magpie.exe` çš„å±æ€§
- åº”è¯¥æ˜¾ç¤º Magpie LOGO
- å¦‚æœæ˜¾ç¤º Electron å›¾æ ‡ï¼Œè¯´æ˜é…ç½®æœ‰é—®é¢˜

### 3. å®‰è£…ç¨‹åºéªŒè¯
- æŸ¥çœ‹ `release/Magpie Setup 1.0.0.exe` çš„å±æ€§
- åº”è¯¥æ˜¾ç¤º Magpie LOGO

## å½“å‰éœ€è¦æ£€æŸ¥çš„ç‚¹

1. **å›¾æ ‡æ–‡ä»¶å†…å®¹** - åŒå‡»æŸ¥çœ‹æ˜¯å¦çœŸçš„æ˜¯ Magpie LOGO
2. **åº”ç”¨å›¾æ ‡** - æŸ¥çœ‹ Magpie.exe çš„å±æ€§
3. **å®‰è£…ç¨‹åºå›¾æ ‡** - æŸ¥çœ‹å®‰è£…ç¨‹åºçš„å±æ€§
4. **è¿è¡Œåº”ç”¨** - æŸ¥çœ‹çª—å£å›¾æ ‡

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³æ£€æŸ¥** - åŒå‡» `build/icons/icon.ico` æŸ¥çœ‹å†…å®¹
2. **éªŒè¯åº”ç”¨** - æŸ¥çœ‹ `Magpie.exe` çš„å›¾æ ‡
3. **è¿è¡Œæµ‹è¯•** - è¿è¡Œåº”ç”¨æŸ¥çœ‹çª—å£å›¾æ ‡
4. **æŠ¥å‘Šç»“æœ** - å‘Šè¯‰æˆ‘å…·ä½“å“ªä¸ªä½ç½®è¿˜æœ‰é—®é¢˜

å¦‚æœå›¾æ ‡æ–‡ä»¶æœ¬èº«æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°ç”Ÿæˆã€‚å¦‚æœå›¾æ ‡æ–‡ä»¶æ­£ç¡®ä½†åº”ç”¨ä»ç„¶æ˜¾ç¤ºé”™è¯¯å›¾æ ‡ï¼Œæˆ‘ä»¬éœ€è¦è¿›ä¸€æ­¥è°ƒè¯•æ„å»ºé…ç½®ã€‚
