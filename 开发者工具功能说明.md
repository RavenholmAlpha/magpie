# 🛠️ 开发者工具功能说明

## ✅ **开发者工具功能已添加！**

### 🎯 **功能概述**

现在您可以通过多种方式快速打开和关闭开发者工具，方便调试环境变量、查看网络请求、检查控制台日志等。

---

## 🚀 **使用方法**

### **方法1：点击按钮（推荐）**
1. 在标题栏右侧找到开发者工具按钮（代码图标）
2. 点击即可打开/关闭开发者工具
3. 按钮悬停时会变成蓝色

### **方法2：键盘快捷键**
- 按 **F12** 键快速打开/关闭开发者工具
- 这是最常用的方式，与浏览器一致

### **方法3：右键菜单**
- 在应用窗口中右键点击
- 选择"检查元素"或"开发者工具"

---

## 🎨 **界面位置**

```
┌─────────────────────────────────────────────────────────┐
│ [LOGO] Magpie    HTTP API 测试工具    [主题][工具][−][□][×] │
└─────────────────────────────────────────────────────────┘
                                    ↑
                              开发者工具按钮
```

**按钮图标：** 代码/文档图标
**悬停效果：** 蓝色背景
**提示文字：** "开发者工具"

---

## 🔧 **技术实现**

### **Electron集成**
- 使用 `mainWindow.webContents.toggleDevTools()` 方法
- 支持完整的Chrome DevTools功能
- 与Electron主进程通信

### **键盘快捷键**
- 监听 `before-input-event` 事件
- 检测F12键按下
- 自动切换开发者工具状态

### **跨平台支持**
- Windows: F12
- macOS: F12 或 Cmd+Option+I
- Linux: F12

---

## 📊 **开发者工具功能**

### **Console标签页**
- 查看环境变量替换日志
- 查看网络请求日志
- 查看错误和警告信息
- 执行JavaScript代码

### **Network标签页**
- 查看所有HTTP请求
- 查看请求和响应详情
- 查看请求头、响应头
- 查看请求时间线

### **Elements标签页**
- 检查DOM结构
- 修改CSS样式
- 查看元素属性
- 实时预览修改

### **Sources标签页**
- 查看源代码
- 设置断点调试
- 查看变量值
- 单步执行代码

---

## 🐛 **调试环境变量**

### **查看替换日志**
1. 打开开发者工具（F12）
2. 切换到 **Console** 标签页
3. 发送一个包含变量的请求
4. 查看以下日志：

```
📤 准备发送请求:
  url: "{{baseUrl}}/api/users"
  activeEnvironment: "1234567890"
  environmentsCount: 1
  activeEnvName: "开发环境"

🔄 开始替换变量:
  text: "{{baseUrl}}/api/users"
  activeEnvId: "1234567890"
  environmentsCount: 1

✅ 找到激活环境: 开发环境 变量数量: 1

✅ 替换变量: {{baseUrl}} → http://localhost:3000

🎯 替换后结果: http://localhost:3000/api/users
```

### **查看网络请求**
1. 打开开发者工具（F12）
2. 切换到 **Network** 标签页
3. 发送请求
4. 点击请求查看详情：
   - **Headers**: 查看请求头
   - **Response**: 查看响应内容
   - **Timing**: 查看请求时间

---

## 💡 **使用技巧**

### **快速调试**
1. **F12** 快速打开开发者工具
2. **Ctrl+Shift+C** 选择元素（Elements标签页）
3. **Ctrl+Shift+J** 直接打开Console标签页
4. **Ctrl+Shift+I** 打开开发者工具

### **环境变量调试**
1. 在Console中执行：
   ```javascript
   // 查看当前环境
   console.log('当前环境:', window.electronAPI?.getActiveEnvironment?.());
   
   // 查看所有环境
   console.log('所有环境:', window.electronAPI?.getEnvironments?.());
   ```

### **网络请求调试**
1. 在Network标签页中：
   - 勾选"Preserve log"保持日志
   - 使用过滤器筛选请求
   - 右键请求可以复制为cURL

---

## 🎯 **常见用途**

### **1. 调试环境变量**
- 查看变量替换过程
- 确认变量值是否正确
- 检查环境是否激活

### **2. 调试网络请求**
- 查看实际发送的URL
- 检查请求头设置
- 分析响应数据

### **3. 调试UI问题**
- 检查元素样式
- 修改CSS进行测试
- 查看组件状态

### **4. 性能分析**
- 查看请求时间
- 分析内存使用
- 检查渲染性能

---

## ⚙️ **高级功能**

### **断点调试**
1. 在Sources标签页中找到代码文件
2. 点击行号设置断点
3. 触发断点条件
4. 查看变量值和调用栈

### **性能分析**
1. 切换到Performance标签页
2. 点击录制按钮
3. 执行操作
4. 停止录制查看分析结果

### **内存分析**
1. 切换到Memory标签页
2. 选择堆快照
3. 点击"Take snapshot"
4. 分析内存使用情况

---

## 🔒 **安全说明**

### **生产环境**
- 开发者工具在生产环境中仍然可用
- 建议在发布前禁用开发者工具
- 可以通过代码控制是否显示

### **调试信息**
- 控制台日志包含敏感信息
- 不要在生产环境输出敏感数据
- 使用环境变量控制日志级别

---

## 📝 **快捷键总结**

| 快捷键 | 功能 |
|--------|------|
| **F12** | 打开/关闭开发者工具 |
| **Ctrl+Shift+I** | 打开开发者工具 |
| **Ctrl+Shift+J** | 打开Console标签页 |
| **Ctrl+Shift+C** | 选择元素 |
| **Ctrl+R** | 刷新页面 |
| **Ctrl+Shift+R** | 强制刷新 |

---

## 🎉 **总结**

现在您有了完整的开发者工具支持：

✅ **多种打开方式** - 按钮、快捷键、右键菜单
✅ **完整功能** - Console、Network、Elements、Sources
✅ **环境变量调试** - 详细的替换日志
✅ **网络请求调试** - 完整的请求/响应信息
✅ **性能分析** - 内存、性能、渲染分析
✅ **跨平台支持** - Windows、macOS、Linux

**现在可以方便地调试环境变量功能了！** 🛠️
