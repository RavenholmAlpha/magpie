# ğŸŒ Magpie ç¯å¢ƒåŠŸèƒ½å®Œæ•´è¯´æ˜

## âœ… ç¯å¢ƒåŠŸèƒ½å·²å®Œæ•´å®ç°ï¼

### ğŸ“‹ **åŠŸèƒ½æ¦‚è¿°**

ç¯å¢ƒï¼ˆEnvironmentï¼‰åŠŸèƒ½è®©æ‚¨èƒ½å¤Ÿåœ¨ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä¹‹é—´å¿«é€Ÿåˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹æ¯ä¸ªè¯·æ±‚çš„URLã€Tokenç­‰ä¿¡æ¯ã€‚

---

## ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**

### 1. **ç¯å¢ƒç®¡ç†ç•Œé¢**
- âœ… åˆ›å»ºæ–°ç¯å¢ƒ
- âœ… ç¼–è¾‘ç¯å¢ƒå˜é‡
- âœ… åˆ é™¤ç¯å¢ƒ
- âœ… æ¿€æ´»/å–æ¶ˆæ¿€æ´»ç¯å¢ƒ
- âœ… æŸ¥çœ‹ç¯å¢ƒå˜é‡æ•°é‡

### 2. **ç¯å¢ƒå˜é‡ç³»ç»Ÿ**
- âœ… æ”¯æŒåœ¨URLä¸­ä½¿ç”¨å˜é‡ï¼š`{{baseUrl}}/api/users`
- âœ… æ”¯æŒåœ¨Headersä¸­ä½¿ç”¨å˜é‡ï¼š`Authorization: Bearer {{token}}`
- âœ… æ”¯æŒåœ¨Bodyä¸­ä½¿ç”¨å˜é‡ï¼š`{"env": "{{environment}}"}`
- âœ… è‡ªåŠ¨æ›¿æ¢æ‰€æœ‰å˜é‡

### 3. **å¿«é€Ÿåˆ‡æ¢**
- âœ… å·¦ä¾§æ é¡¶éƒ¨ç¯å¢ƒé€‰æ‹©å™¨
- âœ… ä¸€é”®åˆ‡æ¢ç¯å¢ƒ
- âœ… æ‰€æœ‰è¯·æ±‚è‡ªåŠ¨ä½¿ç”¨å½“å‰ç¯å¢ƒçš„å˜é‡

---

## ğŸ› ï¸ **å¦‚ä½•ä½¿ç”¨ç¯å¢ƒåŠŸèƒ½**

### **æ­¥éª¤1ï¼šæ‰“å¼€ç¯å¢ƒç®¡ç†å™¨**
1. ç‚¹å‡»å·¦ä¾§æ é¡¶éƒ¨çš„"ç®¡ç†"æŒ‰é’®
2. å¼¹å‡ºç¯å¢ƒç®¡ç†å™¨çª—å£

### **æ­¥éª¤2ï¼šåˆ›å»ºæ–°ç¯å¢ƒ**
1. åœ¨ç¯å¢ƒç®¡ç†å™¨ä¸­ï¼Œç‚¹å‡»å³ä¸Šè§’çš„"æ–°å»º"æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„è¾“å…¥æ¡†ä¸­è¾“å…¥ç¯å¢ƒåç§°ï¼Œä¾‹å¦‚ï¼š
   - "å¼€å‘ç¯å¢ƒ"
   - "æµ‹è¯•ç¯å¢ƒ"
   - "ç”Ÿäº§ç¯å¢ƒ"
3. æŒ‰Enteræˆ–ç‚¹å‡»"ç¡®è®¤"

### **æ­¥éª¤3ï¼šé…ç½®ç¯å¢ƒå˜é‡**
1. åœ¨å·¦ä¾§ç¯å¢ƒåˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªç¯å¢ƒ
2. åœ¨å³ä¾§ç¼–è¾‘å™¨ä¸­æ·»åŠ å˜é‡ï¼Œä¾‹å¦‚ï¼š

**å¼€å‘ç¯å¢ƒå˜é‡ï¼š**
```
å˜é‡å: baseUrl
å˜é‡å€¼: http://localhost:3000

å˜é‡å: token
å˜é‡å€¼: dev_token_123456

å˜é‡å: apiVersion
å˜é‡å€¼: v1
```

**ç”Ÿäº§ç¯å¢ƒå˜é‡ï¼š**
```
å˜é‡å: baseUrl
å˜é‡å€¼: https://api.example.com

å˜é‡å: token
å˜é‡å€¼: prod_token_xyz789

å˜é‡å: apiVersion
å˜é‡å€¼: v2
```

### **æ­¥éª¤4ï¼šæ¿€æ´»ç¯å¢ƒ**
1. åœ¨ç¯å¢ƒåˆ—è¡¨ä¸­ï¼Œç‚¹å‡»ç¯å¢ƒå³ä¾§çš„"â—‹"æŒ‰é’®æ¿€æ´»ç¯å¢ƒ
2. æ¿€æ´»åæ˜¾ç¤ºä¸º"âˆš"ï¼Œå¹¶æ˜¾ç¤º"æ¿€æ´»ä¸­"å¾½ç« 
3. ä¹Ÿå¯ä»¥åœ¨å·¦ä¾§æ é¡¶éƒ¨çš„ä¸‹æ‹‰é€‰æ‹©å™¨ä¸­é€‰æ‹©ç¯å¢ƒ

### **æ­¥éª¤5ï¼šåœ¨è¯·æ±‚ä¸­ä½¿ç”¨å˜é‡**
åœ¨URLæ¡†ä¸­è¾“å…¥ï¼š
```
{{baseUrl}}/{{apiVersion}}/users
```

å½“æ¿€æ´»"å¼€å‘ç¯å¢ƒ"æ—¶ï¼Œå®é™…å‘é€çš„URLæ˜¯ï¼š
```
http://localhost:3000/v1/users
```

å½“æ¿€æ´»"ç”Ÿäº§ç¯å¢ƒ"æ—¶ï¼Œå®é™…å‘é€çš„URLæ˜¯ï¼š
```
https://api.example.com/v2/users
```

---

## ğŸ“– **ä½¿ç”¨åœºæ™¯ç¤ºä¾‹**

### **åœºæ™¯1ï¼šå¤šç¯å¢ƒAPIæµ‹è¯•**

```
ç¯å¢ƒï¼šæœ¬åœ°å¼€å‘
å˜é‡ï¼š
  âœ“ baseUrl: http://localhost:8080
  âœ“ apiKey: local_key_123
  âœ“ debug: true

ç¯å¢ƒï¼šæµ‹è¯•æœåŠ¡å™¨
å˜é‡ï¼š
  âœ“ baseUrl: https://test-api.example.com
  âœ“ apiKey: test_key_456
  âœ“ debug: true

ç¯å¢ƒï¼šç”Ÿäº§æœåŠ¡å™¨
å˜é‡ï¼š
  âœ“ baseUrl: https://api.example.com
  âœ“ apiKey: prod_key_xyz
  âœ“ debug: false
```

**è¯·æ±‚é…ç½®ï¼ˆé€šç”¨ï¼‰ï¼š**
```
URL: {{baseUrl}}/api/users
Headers:
  - X-API-Key: {{apiKey}}
  - X-Debug: {{debug}}
```

**åˆ‡æ¢ç¯å¢ƒæ—¶ï¼Œåªéœ€åœ¨é¡¶éƒ¨é€‰æ‹©å™¨ä¸­é€‰æ‹©ï¼Œæ‰€æœ‰è¯·æ±‚è‡ªåŠ¨ä½¿ç”¨å¯¹åº”ç¯å¢ƒçš„å˜é‡ï¼**

---

### **åœºæ™¯2ï¼šå›¢é˜Ÿåä½œ**

```
ç¯å¢ƒï¼šå¼ ä¸‰æœ¬åœ°
å˜é‡ï¼š
  âœ“ baseUrl: http://192.168.1.100:3000
  âœ“ userId: dev_user_001

ç¯å¢ƒï¼šæå››æœ¬åœ°
å˜é‡ï¼š
  âœ“ baseUrl: http://192.168.1.101:3000
  âœ“ userId: dev_user_002
```

æ¯ä¸ªå¼€å‘è€…ä½¿ç”¨è‡ªå·±çš„ç¯å¢ƒé…ç½®ï¼Œé¿å…å†²çªã€‚

---

### **åœºæ™¯3ï¼šä¸åŒå®¢æˆ·/é¡¹ç›®**

```
ç¯å¢ƒï¼šå®¢æˆ·A
å˜é‡ï¼š
  âœ“ endpoint: https://client-a.api.com
  âœ“ clientId: client_a_12345
  âœ“ secret: secret_a

ç¯å¢ƒï¼šå®¢æˆ·B
å˜é‡ï¼š
  âœ“ endpoint: https://client-b.api.com
  âœ“ clientId: client_b_67890
  âœ“ secret: secret_b
```

---

## ğŸ¨ **ç¯å¢ƒç®¡ç†å™¨ç•Œé¢**

### **å·¦ä¾§ï¼šç¯å¢ƒåˆ—è¡¨**
```
ç¯å¢ƒåˆ—è¡¨                    [æ–°å»º]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â–¡ å¼€å‘ç¯å¢ƒ              [âˆš][Ã—]
â–¡ æµ‹è¯•ç¯å¢ƒ [æ¿€æ´»ä¸­]      [âˆš][Ã—]
â–¡ ç”Ÿäº§ç¯å¢ƒ              [âˆš][Ã—]
```

### **å³ä¾§ï¼šç¯å¢ƒå˜é‡ç¼–è¾‘å™¨**
```
å¼€å‘ç¯å¢ƒ
2 ä¸ªå˜é‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’¡ å¦‚ä½•ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š
åœ¨URLã€Headersã€Bodyä¸­ä½¿ç”¨ {{å˜é‡å}} æ¥å¼•ç”¨å˜é‡
ä¾‹å¦‚ï¼š{{baseUrl}}/api/users
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å˜é‡åˆ—è¡¨ï¼š
â˜‘ baseUrl    http://localhost:3000
â˜‘ token      dev_token_123456
â˜ timeout    30
```

---

## ğŸ”§ **æŠ€æœ¯å®ç°**

### **å˜é‡æ›¿æ¢é€»è¾‘ï¼ˆhttpClient.tsï¼‰ï¼š**

```typescript
function replaceVariables(text: string, environments: Environment[], activeEnvId: string | null): string {
  if (!activeEnvId) return text;
  
  const activeEnv = environments.find(env => env.id === activeEnvId);
  if (!activeEnv) return text;

  let result = text;
  activeEnv.variables.forEach((variable) => {
    if (variable.enabled) {
      const regex = new RegExp(`{{\\s*${variable.key}\\s*}}`, 'g');
      result = result.replace(regex, variable.value);
    }
  });

  return result;
}
```

### **æ”¯æŒçš„æ›¿æ¢ä½ç½®ï¼š**
1. âœ… **URL** - è¯·æ±‚åœ°å€
2. âœ… **Queryå‚æ•°** - URLå‚æ•°å€¼
3. âœ… **Headers** - è¯·æ±‚å¤´å€¼
4. âœ… **Body** - è¯·æ±‚ä½“å†…å®¹
5. âœ… **Auth** - è®¤è¯ä¿¡æ¯ï¼ˆTokenã€API Keyç­‰ï¼‰

### **å˜é‡æ ¼å¼ï¼š**
- æ ‡å‡†æ ¼å¼ï¼š`{{variableName}}`
- æ”¯æŒç©ºæ ¼ï¼š`{{ variableName }}`
- å¤§å°å†™æ•æ„Ÿ
- è‡ªåŠ¨é€’å½’æ›¿æ¢

---

## ğŸ§ª **å®é™…ä½¿ç”¨ç¤ºä¾‹**

### **ç¤ºä¾‹1ï¼šåŸºç¡€ä½¿ç”¨**

**ç¯å¢ƒé…ç½®ï¼š**
```
ç¯å¢ƒåç§°ï¼šå¼€å‘ç¯å¢ƒ
å˜é‡ï¼š
  baseUrl = http://localhost:3000
  version = v1
```

**è¯·æ±‚é…ç½®ï¼š**
```
GET {{baseUrl}}/{{version}}/users
```

**å®é™…å‘é€ï¼š**
```
GET http://localhost:3000/v1/users
```

---

### **ç¤ºä¾‹2ï¼šå¸¦è®¤è¯**

**ç¯å¢ƒé…ç½®ï¼š**
```
ç¯å¢ƒåç§°ï¼šç”Ÿäº§ç¯å¢ƒ
å˜é‡ï¼š
  apiUrl = https://api.example.com
  authToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**è¯·æ±‚é…ç½®ï¼š**
```
POST {{apiUrl}}/api/login
Headers:
  Authorization: Bearer {{authToken}}
  Content-Type: application/json
```

**å®é™…å‘é€ï¼š**
```
POST https://api.example.com/api/login
Headers:
  Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
  Content-Type: application/json
```

---

### **ç¤ºä¾‹3ï¼šåŠ¨æ€å‚æ•°**

**ç¯å¢ƒé…ç½®ï¼š**
```
ç¯å¢ƒåç§°ï¼šæµ‹è¯•ç¯å¢ƒ
å˜é‡ï¼š
  host = test.example.com
  userId = test_user_001
  pageSize = 20
```

**è¯·æ±‚é…ç½®ï¼š**
```
GET https://{{host}}/api/users/{{userId}}/posts?limit={{pageSize}}
```

**å®é™…å‘é€ï¼š**
```
GET https://test.example.com/api/users/test_user_001/posts?limit=20
```

---

## ğŸ’¡ **æœ€ä½³å®è·µ**

### **1. ç¯å¢ƒå˜é‡å‘½åè§„èŒƒ**
- âœ… ä½¿ç”¨é©¼å³°å‘½åï¼š`baseUrl`, `authToken`
- âœ… ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š`base_url`, `auth_token`
- âœ… è¯­ä¹‰åŒ–å‘½åï¼š`apiEndpoint`, `clientId`
- âŒ é¿å…ç‰¹æ®Šå­—ç¬¦ï¼šä¸è¦ä½¿ç”¨ç©ºæ ¼ã€ä¸­æ–‡

### **2. å¸¸ç”¨å˜é‡å»ºè®®**
```
baseUrl / apiUrl    - APIåŸºç¡€åœ°å€
token / authToken   - è®¤è¯ä»¤ç‰Œ
apiKey / clientKey  - APIå¯†é’¥
version / apiVersion - APIç‰ˆæœ¬
timeout             - è¶…æ—¶æ—¶é—´
debug               - è°ƒè¯•æ¨¡å¼
```

### **3. å®‰å…¨å»ºè®®**
- âš ï¸ ä¸è¦å°†ç”Ÿäº§ç¯å¢ƒçš„æ•æ„Ÿä¿¡æ¯æäº¤åˆ°ä»£ç ä»“åº“
- âš ï¸ æ¯ä¸ªå¼€å‘è€…åº”è¯¥æœ‰è‡ªå·±çš„æœ¬åœ°ç¯å¢ƒé…ç½®
- âš ï¸ å®šæœŸæ›´æ–°ç”Ÿäº§ç¯å¢ƒçš„tokenå’Œå¯†é’¥

---

## ğŸ¯ **åŠŸèƒ½ç‰¹æ€§**

### **ç¯å¢ƒç®¡ç†å™¨ç‰¹æ€§ï¼š**
- âœ… **åŒé¢æ¿è®¾è®¡** - å·¦ä¾§ç¯å¢ƒåˆ—è¡¨ï¼Œå³ä¾§å˜é‡ç¼–è¾‘
- âœ… **å®æ—¶ç¼–è¾‘** - ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ
- âœ… **æ¿€æ´»çŠ¶æ€æ˜¾ç¤º** - æ¸…æ¥šçŸ¥é“å“ªä¸ªç¯å¢ƒæ­£åœ¨ä½¿ç”¨
- âœ… **å˜é‡è®¡æ•°** - æ˜¾ç¤ºæ¯ä¸ªç¯å¢ƒæœ‰å¤šå°‘ä¸ªå˜é‡
- âœ… **ä½¿ç”¨æç¤º** - å†…ç½®ä½¿ç”¨è¯´æ˜

### **å˜é‡ç¼–è¾‘å™¨ç‰¹æ€§ï¼š**
- âœ… **Key-Valueç¼–è¾‘** - å¤ç”¨KeyValueEditorç»„ä»¶
- âœ… **å¯ç”¨/ç¦ç”¨** - å¯ä»¥ä¸´æ—¶ç¦ç”¨å˜é‡
- âœ… **æ‰¹é‡ç®¡ç†** - æ”¯æŒå¤šä¸ªå˜é‡
- âœ… **å®æ—¶ä¿å­˜** - ç¼–è¾‘åè‡ªåŠ¨ä¿å­˜

---

## ğŸ“¦ **æ–‡ä»¶ç»“æ„**

```
src/renderer/components/
â””â”€â”€ EnvironmentManager.tsx     # ç¯å¢ƒç®¡ç†å™¨ç»„ä»¶

src/renderer/utils/
â””â”€â”€ httpClient.ts              # å˜é‡æ›¿æ¢é€»è¾‘

src/renderer/styles/
â””â”€â”€ titlebar.css               # ç¯å¢ƒç®¡ç†å™¨æ ·å¼
```

---

## ğŸš€ **ä½¿ç”¨æµç¨‹**

```
1. åˆ›å»ºç¯å¢ƒ
   â†“
2. é…ç½®ç¯å¢ƒå˜é‡
   â†“
3. æ¿€æ´»ç¯å¢ƒ
   â†“
4. åœ¨è¯·æ±‚ä¸­ä½¿ç”¨ {{å˜é‡å}}
   â†“
5. å‘é€è¯·æ±‚ï¼ˆè‡ªåŠ¨æ›¿æ¢å˜é‡ï¼‰
   â†“
6. åˆ‡æ¢ç¯å¢ƒæ—¶ï¼Œæ‰€æœ‰è¯·æ±‚è‡ªåŠ¨ä½¿ç”¨æ–°ç¯å¢ƒçš„å˜é‡
```

---

## ğŸ‰ **æ€»ç»“**

ç¯å¢ƒåŠŸèƒ½ç°åœ¨å·²ç»å®Œæ•´å®ç°ï¼ŒåŒ…æ‹¬ï¼š

âœ… **å®Œæ•´çš„ç¯å¢ƒç®¡ç†ç•Œé¢**
- åˆ›å»º/ç¼–è¾‘/åˆ é™¤ç¯å¢ƒ
- ç¯å¢ƒå˜é‡ç®¡ç†
- æ¿€æ´»ç¯å¢ƒ

âœ… **å˜é‡æ›¿æ¢ç³»ç»Ÿ**
- æ”¯æŒURLã€Headersã€Bodyä¸­çš„å˜é‡
- è‡ªåŠ¨é€’å½’æ›¿æ¢
- æ”¯æŒå¯ç”¨/ç¦ç”¨å˜é‡

âœ… **ç”¨æˆ·å‹å¥½çš„ç•Œé¢**
- åŒé¢æ¿è®¾è®¡
- å®æ—¶ç¼–è¾‘
- ä½¿ç”¨æç¤º

ç°åœ¨æ‚¨å¯ä»¥ï¼š
1. ç‚¹å‡»å·¦ä¾§æ é¡¶éƒ¨çš„"ç®¡ç†"æŒ‰é’®æ‰“å¼€ç¯å¢ƒç®¡ç†å™¨
2. åˆ›å»ºä¸åŒçš„ç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ï¼‰
3. ä¸ºæ¯ä¸ªç¯å¢ƒé…ç½®å˜é‡
4. åœ¨è¯·æ±‚ä¸­ä½¿ç”¨`{{å˜é‡å}}`
5. åˆ‡æ¢ç¯å¢ƒä¸‹æ‹‰é€‰æ‹©å™¨æ¥å¿«é€Ÿåˆ‡æ¢

**å®Œæ•´çš„ç¯å¢ƒåŠŸèƒ½è®©APIæµ‹è¯•æ›´åŠ é«˜æ•ˆï¼** ğŸ¯
