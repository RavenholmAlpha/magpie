# 🚀 Magpie 安装和使用指南

## 📦 安装步骤

### 系统要求
- **操作系统**: Windows 10+, macOS 10.13+, Linux
- **Node.js**: v16.0+ (仅开发需要)
- **内存**: 建议4GB+
- **磁盘空间**: 200MB+

### 方式一：从源码安装（开发模式）

#### 1. 克隆或下载项目
```bash
cd H:\cussorproject\magpie
```

#### 2. 安装依赖
```bash
npm install
```

如果下载很慢，使用国内镜像：
```bash
npm install --registry=https://registry.npmmirror.com
```

#### 3. 启动开发模式
```bash
npm run dev
```

这会同时启动前端开发服务器和Electron应用。

### 方式二：构建生产版本

#### 1. 构建应用
```bash
npm run build
```

#### 2. 打包桌面应用
```bash
npm run package
```

打包后的安装文件在 `release/` 目录中：
- **Windows**: `Magpie Setup.exe`
- **macOS**: `Magpie.dmg`
- **Linux**: `Magpie.AppImage`

## 🎯 快速使用教程

### 第一次使用

#### 1. 发送第一个GET请求

1. 启动Magpie应用
2. 在顶部选择HTTP方法：`GET`
3. 输入测试URL：`https://jsonplaceholder.typicode.com/posts/1`
4. 点击"发送"按钮或按Enter键
5. 查看下方的响应结果

**示例截图流程：**
```
[方法选择器: GET] [URL输入框: https://...] [发送按钮]
                      ↓
              [响应区域显示]
   状态码: 200 OK  |  时间: 250ms  |  大小: 292 B
              ↓
          {
            "userId": 1,
            "id": 1,
            "title": "...",
            "body": "..."
          }
```

#### 2. 发送POST请求

1. 选择方法：`POST`
2. 输入URL：`https://jsonplaceholder.typicode.com/posts`
3. 点击"请求体"标签
4. 选择请求体类型：`JSON`
5. 输入JSON数据：
```json
{
  "title": "我的第一篇文章",
  "body": "这是文章内容",
  "userId": 1
}
```
6. 点击"发送"
7. 查看创建成功的响应（状态码201）

### 使用环境变量

#### 创建环境

1. 点击右上角"+ 新环境"按钮
2. 输入环境名称，如"开发环境"
3. 点击"创建"

#### 编辑环境变量

1. 点击右上角"⚙️ 管理"按钮
2. 在环境列表中点击"✏️"图标
3. 添加变量：
   - 变量名：`base_url`
   - 变量值：`https://api.example.com`
4. 点击"+ 添加变量"继续添加
   - 变量名：`api_key`
   - 变量值：`your-api-key-here`
5. 点击"保存"

#### 在请求中使用变量

在URL中：
```
{{base_url}}/users
```

在请求头中：
```
Key: Authorization
Value: Bearer {{api_token}}
```

在请求体中：
```json
{
  "apiKey": "{{api_key}}",
  "userId": "{{user_id}}"
}
```

### 管理集合

#### 创建集合

1. 点击侧边栏的"集合"标签
2. 点击"+ 新建集合"
3. 输入集合名称，如"用户API"
4. 点击"创建"

#### 保存请求到集合

1. 配置好您的请求（方法、URL、参数等）
2. 点击顶部的"💾 保存"按钮
3. 选择要保存到的集合
4. 请求已保存！

#### 从集合加载请求

1. 点击侧边栏的"集合"标签
2. 展开集合，点击其中的请求
3. 请求会自动加载到编辑器

#### 导出集合

1. 点击侧边栏"集合"标签
2. 点击"📤 导出"按钮
3. 集合会导出为JSON文件
4. 文件名格式：`magpie-collections-时间戳.json`

#### 导入集合

1. 点击"📥 导入"按钮
2. 选择之前导出的JSON文件
3. 集合导入成功！

### 生成代码

想要在代码中使用当前请求？

1. 配置好请求
2. 点击"</> 代码"按钮
3. 选择语言标签（cURL / JavaScript / Python / Node.js）
4. 点击"📋 复制代码"
5. 粘贴到您的项目中使用！

**支持的语言：**
- **cURL** - 命令行工具
- **JavaScript** - Fetch API
- **Python** - requests库
- **Node.js** - Axios库

### 使用历史记录

#### 查看历史

1. 点击侧边栏"历史记录"标签
2. 所有发送过的请求会自动保存
3. 点击任何历史项可快速加载

#### 搜索历史

1. 在历史记录标签页
2. 使用顶部搜索框
3. 输入关键词（支持URL、方法、名称）
4. 实时过滤结果

#### 清空历史

1. 在历史记录标签页
2. 点击"清空历史"按钮
3. 确认操作

### 克隆请求

快速复制当前请求：

1. 配置好一个请求
2. 点击"📋 克隆"按钮
3. 会创建一个新的副本，名称为"原名称 (副本)"
4. 修改副本而不影响原请求

### 复制响应

1. 发送请求后
2. 在响应区域点击"📋 复制响应"
3. 响应内容已复制到剪贴板
4. 可以粘贴到任何地方

## 💡 使用技巧

### 1. 快捷键

- **Enter** - 在URL输入框中按Enter快速发送请求
- **Tab** - 在键值对编辑器中快速切换焦点

### 2. 请求配置技巧

#### 添加查询参数
```
方式一：直接在URL中
https://api.example.com/users?page=1&limit=10

方式二：使用查询参数标签
点击"查询参数"标签，添加键值对：
- page = 1
- limit = 10
```

#### 设置请求头
```
点击"请求头"标签：
- Content-Type = application/json
- Authorization = Bearer token123
- X-Custom-Header = custom-value
```

#### 配置认证

**Bearer Token:**
1. 点击"认证"标签
2. 选择"Bearer Token"
3. 输入token值

**Basic Auth:**
1. 选择"Basic Auth"
2. 输入用户名和密码

**API Key:**
1. 选择"API Key"
2. 输入Header名称（如 X-API-Key）
3. 输入Key值

### 3. 环境最佳实践

创建多个环境用于不同阶段：

```
📝 开发环境
  base_url = http://localhost:3000
  api_key = dev-key
  debug = true

📝 测试环境
  base_url = https://test.api.com
  api_key = test-key
  debug = true

📝 生产环境
  base_url = https://api.com
  api_key = prod-key
  debug = false
```

### 4. 集合组织建议

```
📁 用户模块
  └─ GET 获取用户列表
  └─ GET 获取单个用户
  └─ POST 创建用户
  └─ PUT 更新用户
  └─ DELETE 删除用户

📁 订单模块
  └─ GET 获取订单列表
  └─ POST 创建订单
  ...
```

## 🔧 常见问题

### Q1: 启动失败怎么办？

**A:** 检查以下几点：
1. Node.js版本是否 >= 16
2. 依赖是否完整安装：`npm install`
3. 端口5173是否被占用
4. 查看终端错误信息

### Q2: 请求发送失败？

**A:** 可能原因：
1. URL格式不正确（需要包含 http:// 或 https://）
2. 网络连接问题
3. API服务器问题
4. 请求配置错误（检查请求头、认证等）

### Q3: 环境变量不生效？

**A:** 确认：
1. 是否选择了正确的环境（右上角选择器）
2. 变量名是否正确（使用`{{变量名}}`语法）
3. 变量是否启用（勾选复选框）

### Q4: 数据丢失了？

**A:** v2.0已实现数据持久化：
- 所有集合、环境、历史会自动保存
- 应用重启后数据保持
- 数据存储在本地（使用electron-store）

### Q5: 如何分享集合给团队？

**A:** 使用导出功能：
1. 导出集合为JSON文件
2. 通过邮件/聊天工具发送
3. 团队成员导入JSON文件

### Q6: 支持Postman集合导入吗？

**A:** 当前版本仅支持Magpie格式的JSON：
- 可导入导出Magpie集合
- Postman集合导入功能计划在v2.1添加

## 📚 进阶使用

### 批量请求测试

1. 将相关请求保存到同一个集合
2. 逐个点击运行
3. 查看每个请求的响应
4. （集合运行器功能计划v2.2添加）

### 自动化工作流

使用代码生成功能：
1. 在Magpie中配置和测试请求
2. 生成对应语言代码
3. 集成到您的自动化脚本中

### 团队协作

1. 创建标准化的集合结构
2. 使用统一的环境变量命名
3. 定期导出集合共享
4. 文档化您的API请求

## 🎯 实战示例

### 示例1：测试RESTful API

```
1. 创建集合"Todo API"

2. 添加请求：
   - GET {{base_url}}/todos (获取所有)
   - GET {{base_url}}/todos/1 (获取单个)
   - POST {{base_url}}/todos (创建)
     Body: {"title": "测试", "completed": false}
   - PUT {{base_url}}/todos/1 (更新)
   - DELETE {{base_url}}/todos/1 (删除)

3. 设置环境：
   base_url = https://jsonplaceholder.typicode.com

4. 逐个测试请求
```

### 示例2：OAuth认证流程

```
1. 第一步：获取Token
   POST {{auth_url}}/oauth/token
   Body: {
     "client_id": "{{client_id}}",
     "client_secret": "{{client_secret}}",
     "grant_type": "client_credentials"
   }

2. 复制响应中的access_token

3. 第二步：使用Token访问API
   GET {{api_url}}/protected-resource
   Auth: Bearer Token
   Token: <粘贴access_token>
```

## 💝 获取帮助

如果您需要帮助：

1. 📖 查看 `README.md` - 项目概述
2. 🚀 查看 `快速开始.md` - 快速入门
3. 👨‍💻 查看 `开发指南.md` - 开发文档
4. 📊 查看 `当前实现状态.md` - 功能状态
5. 💬 提交GitHub Issue

## 🎉 开始使用

现在您已经掌握了Magpie的基本使用方法！

**下一步：**
1. ✅ 安装Magpie
2. ✅ 发送第一个请求
3. ✅ 创建环境和集合
4. ✅ 探索更多功能

享受使用Magpie进行API开发和测试！🐦✨

---

*最后更新: 2025-10-23*
*版本: v2.0.0*

